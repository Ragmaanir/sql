<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.27.1-dev">


<link href="../css/style.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="../js/doc.js"></script>
<script type="text/javascript">
  CrystalDoc.base_path = "../";
</script>

  <meta id="repository-name" content="github.com/atomframework/model">
  <title>Atom::Query(T) - github.com/atomframework/model</title>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="repository-links">
      <a href="../index.html">README</a>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent open current" data-id="github.com/atomframework/model/Atom" data-name="atom">
      <a href="../Atom.html">Atom</a>
      
        <ul>
  
  <li class="parent " data-id="github.com/atomframework/model/Atom/Model" data-name="atom::model">
      <a href="../Atom/Model.html">Model</a>
      
        <ul>
  
  <li class=" " data-id="github.com/atomframework/model/Atom/Model/DefaultValueError" data-name="atom::model::defaultvalueerror">
      <a href="../Atom/Model/DefaultValueError.html">DefaultValueError</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent open current" data-id="github.com/atomframework/model/Atom/Query" data-name="atom::query(t)">
      <a href="../Atom/Query.html">Query</a>
      
        <ul>
  
  <li class=" " data-id="github.com/atomframework/model/Atom/Query/Having" data-name="atom::query::having">
      <a href="../Atom/Query/Having.html">Having</a>
      
    </li>
  
  <li class=" " data-id="github.com/atomframework/model/Atom/Query/JoinType" data-name="atom::query::jointype">
      <a href="../Atom/Query/JoinType.html">JoinType</a>
      
    </li>
  
  <li class=" " data-id="github.com/atomframework/model/Atom/Query/LatestWherishClause" data-name="atom::query::latestwherishclause">
      <a href="../Atom/Query/LatestWherishClause.html">LatestWherishClause</a>
      
    </li>
  
  <li class=" " data-id="github.com/atomframework/model/Atom/Query/Order" data-name="atom::query::order">
      <a href="../Atom/Query/Order.html">Order</a>
      
    </li>
  
  <li class=" " data-id="github.com/atomframework/model/Atom/Query/Type" data-name="atom::query::type">
      <a href="../Atom/Query/Type.html">Type</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="github.com/atomframework/model/Atom/Repository" data-name="atom::repository">
      <a href="../Atom/Repository.html">Repository</a>
      
        <ul>
  
  <li class="parent " data-id="github.com/atomframework/model/Atom/Repository/Logger" data-name="atom::repository::logger">
      <a href="../Atom/Repository/Logger.html">Logger</a>
      
        <ul>
  
  <li class=" " data-id="github.com/atomframework/model/Atom/Repository/Logger/Dummy" data-name="atom::repository::logger::dummy">
      <a href="../Atom/Repository/Logger/Dummy.html">Dummy</a>
      
    </li>
  
  <li class=" " data-id="github.com/atomframework/model/Atom/Repository/Logger/IO" data-name="atom::repository::logger::io">
      <a href="../Atom/Repository/Logger/IO.html">IO</a>
      
    </li>
  
  <li class=" " data-id="github.com/atomframework/model/Atom/Repository/Logger/Standard" data-name="atom::repository::logger::standard">
      <a href="../Atom/Repository/Logger/Standard.html">Standard</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="github.com/atomframework/model/DB" data-name="db">
      <a href="../DB.html">DB</a>
      
        <ul>
  
  <li class=" " data-id="github.com/atomframework/model/DB/Default" data-name="db::default">
      <a href="../DB/Default.html">Default</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">struct</span> Atom::Query(T)

</h1>


  <ul class="superclass-hierarchy"><li class="superclass"><a href="../Atom/Query.html">Atom::Query(T)</a></li><li class="superclass">Struct</li><li class="superclass">Value</li><li class="superclass">Object</li></ul>




  <h2>Overview</h2>

  <p>A powerful and type-safe SQL Query builder. Can be used either as a separate struct:</p>

<pre><code><span class="t">Atom</span><span class="t">::</span><span class="t">Query</span>(<span class="t">Post</span>).<span class="k">new</span>.where(id: <span class="n">42</span>)</code></pre>

<p>or like an included module (included by default in <code><a href="../Atom/Model.html">Atom::Model</a></code>):</p>

<pre><code><span class="t">Post</span>.where(id: <span class="n">42</span>)</code></pre>

<p>Queries can be either select (default), insert, update or delete, just like an actual SQL query.
Query calls are chainable: <code>Post.where(id: 42).join(:author)<a href="../Atom/Query.html#select%28%2Avalues%3AT.class%7CT%3A%3AAttribute%7CString%7CChar%29-instance-method">.select('*')</a></code>.</p>

<p>Call <code><a href="../Atom/Query.html#to_s-instance-method">#to_s</a></code> to build up the Query into SQL String. <code><a href="../Atom/Query.html#params%3AArray%28DB%3A%3AAny%7CArray%28DB%3A%3AAny%29%29%3F-instance-method">#params</a></code> are filled up while building.</p>














  <h2>Defined in:</h2>
  
    
      <a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/group_by.cr#L2" target="_blank">
        atom/query/group_by.cr
      </a>
    
    <br/>
  
    
      <a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/having.cr#L2" target="_blank">
        atom/query/having.cr
      </a>
    
    <br/>
  
    
      <a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/insert.cr#L2" target="_blank">
        atom/query/insert.cr
      </a>
    
    <br/>
  
    
      <a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/join.cr#L2" target="_blank">
        atom/query/join.cr
      </a>
    
    <br/>
  
    
      <a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/limit.cr#L2" target="_blank">
        atom/query/limit.cr
      </a>
    
    <br/>
  
    
      <a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/offset.cr#L2" target="_blank">
        atom/query/offset.cr
      </a>
    
    <br/>
  
    
      <a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/order_by.cr#L2" target="_blank">
        atom/query/order_by.cr
      </a>
    
    <br/>
  
    
      <a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/returning.cr#L2" target="_blank">
        atom/query/returning.cr
      </a>
    
    <br/>
  
    
      <a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/select.cr#L2" target="_blank">
        atom/query/select.cr
      </a>
    
    <br/>
  
    
      <a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/set.cr#L2" target="_blank">
        atom/query/set.cr
      </a>
    
    <br/>
  
    
      <a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L2" target="_blank">
        atom/query/where.cr
      </a>
    
    <br/>
  
    
      <a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L20" target="_blank">
        atom/query.cr
      </a>
    
    <br/>
  





  <h2>Constructors</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#new-class-method" class="signature"><strong>.new</strong></a>
        
      </li>
    
  </ul>





  <h2>Instance Method Summary</h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#all-instance-method" class="signature"><strong>#all</strong></a>
        
          <div class="summary"><p>Alias of <code><a href="../Atom/Query.html#limit%28limit%3AInt32%3F%3Dnil%29-instance-method">#limit(nil)</a></code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#and-instance-method" class="signature"><strong>#and</strong></a>
        
          <div class="summary"><p>A shorthand for calling <code><a href="../Atom/Query.html#and_where-instance-method">#and_where</a></code> or <code><a href="../Atom/Query.html#and_having%28clause%3AString%2C%2Aparams%29-instance-method">#and_having</a></code> depending on the latest call.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#and_having%28clause%3AString%2C%2Aparams%29-instance-method" class="signature"><strong>#and_having</strong>(clause : String, *params)</a>
        
          <div class="summary"><p>Add <code>AND</code> <em>clause</em> with <em>params</em> to <code>HAVING</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#and_having%28clause%3AString%29-instance-method" class="signature"><strong>#and_having</strong>(clause : String)</a>
        
          <div class="summary"><p>Add <code>AND</code> <em>clause</em> to <code>HAVING</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#and_having_not%28clause%3AString%2C%2Aparams%29-instance-method" class="signature"><strong>#and_having_not</strong>(clause : String, *params)</a>
        
          <div class="summary"><p>Add <code>AND NOT</code> <em>clause</em> with <em>params</em> to <code>HAVING</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#and_having_not%28clause%3AString%29-instance-method" class="signature"><strong>#and_having_not</strong>(clause : String)</a>
        
          <div class="summary"><p>Add <code>AND NOT</code> <em>clause</em> to <code>HAVING</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#and_not-instance-method" class="signature"><strong>#and_not</strong></a>
        
          <div class="summary"><p>A shorthand for calling <code><a href="../Atom/Query.html#and_where_not-instance-method">#and_where_not</a></code> or <code><a href="../Atom/Query.html#and_having_not%28clause%3AString%2C%2Aparams%29-instance-method">#and_having_not</a></code> depending on the latest call.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#and_where-instance-method" class="signature"><strong>#and_where</strong></a>
        
          <div class="summary"><p>Add <code>AND</code> clause with named arguments to <code>WHERE</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#and_where%28clause%3AString%2C%2Aparams%29-instance-method" class="signature"><strong>#and_where</strong>(clause : String, *params)</a>
        
          <div class="summary"><p>Add <code>AND</code> <em>clause</em> with <em>params</em> to <code>WHERE</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#and_where%28clause%3AString%29-instance-method" class="signature"><strong>#and_where</strong>(clause : String)</a>
        
          <div class="summary"><p>Add <code>AND</code> <em>clause</em> to <code>WHERE</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#and_where_not-instance-method" class="signature"><strong>#and_where_not</strong></a>
        
          <div class="summary"><p>Add <code>AND NOT</code> clause with named arguments to <code>WHERE</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#and_where_not%28clause%3AString%2C%2Aparams%29-instance-method" class="signature"><strong>#and_where_not</strong>(clause : String, *params)</a>
        
          <div class="summary"><p>Add <code>AND NOT</code> <em>clause</em> with <em>params</em> to <code>WHERE</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#and_where_not%28clause%3AString%29-instance-method" class="signature"><strong>#and_where_not</strong>(clause : String)</a>
        
          <div class="summary"><p>Add <code>AND NOT</code> <em>clause</em> to <code>WHERE</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#delete-instance-method" class="signature"><strong>#delete</strong></a>
        
          <div class="summary"><p>Mark this query as delete one.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#dup-instance-method" class="signature"><strong>#dup</strong></a>
        
          <div class="summary"><p>Duplicates this query.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#first-instance-method" class="signature"><strong>#first</strong></a>
        
          <div class="summary"><p>Alias of <code><a href="../Atom/Query.html#order_by%28value%3AT%3A%3AAttribute%7CString%2Corder%3AOrder%3F%3DOrder%3A%3AAsc%29-instance-method">#order_by(T.primary_key, :asc)</a><a href="../Atom/Query.html#one-instance-method">.one</a></code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#full_join%28reference%3AT%3A%3AReference%2C%2A%2Anargs%29-instance-method" class="signature"><strong>#full_join</strong>(reference : T::Reference, **nargs)</a>
        
          <div class="summary"><p>Alias of <code>#join(reference, type: :full)</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#full_join%28table%3AString%2Con%3AString%29-instance-method" class="signature"><strong>#full_join</strong>(table : String, on : String)</a>
        
          <div class="summary"><p>Alias of <code>#join(table, on, type: :full)</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#group_by%28%2Avalues%3AString%29-instance-method" class="signature"><strong>#group_by</strong>(*values : String)</a>
        
          <div class="summary"><p>Add <code>GROUP_BY</code> clause.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#having%28clause%3AString%2C%2Aparams%3ADB%3A%3AAny%7CArray%28DB%3A%3AAny%29%2Cor%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%29-instance-method" class="signature"><strong>#having</strong>(clause : String, *params : DB::Any | Array(DB::Any), or : Bool = <span class="n">false</span>, not : Bool = <span class="n">false</span>)</a>
        
          <div class="summary"><p>Add <code>HAVING</code> <em>clause</em> with <em>params</em>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#having%28clause%3AString%2Cor%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%29-instance-method" class="signature"><strong>#having</strong>(clause : String, or : Bool = <span class="n">false</span>, not : Bool = <span class="n">false</span>)</a>
        
          <div class="summary"><p>Add <code>HAVING</code> <em>clause</em> without params.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#having_not%28clause%2C%2Aparams%29-instance-method" class="signature"><strong>#having_not</strong>(clause, *params)</a>
        
          <div class="summary"><p>Add <code>NOT</code> <em>clause</em> with <em>params</em> to <code>HAVING</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#having_not%28clause%29-instance-method" class="signature"><strong>#having_not</strong>(clause)</a>
        
          <div class="summary"><p>Add <code>NOT</code> <em>clause</em> to <code>HAVING</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#insert%3AselfforallValues-instance-method" class="signature"><strong>#insert</strong> : self forall Values</a>
        
          <div class="summary"><p>Add <code>INSERT</code> clause.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#join%28reference%3AT%3A%3AReference%2C%2A%2Ctype_type%3AJoinType%3D%3Ainner%2Cas_as%3AString%3Dreference.to_s.underscore%2Cselect_select%3AChar%7CString%7CEnumerable%28String%7CChar%29%7CNil%3Dnil%29-instance-method" class="signature"><strong>#join</strong>(reference : T::Reference, *, type _type : JoinType = <span class="n">:inner</span>, as _as : String = reference.to_s.underscore, select _select : Char | String | Enumerable(String | Char) | Nil = <span class="n">nil</span>)</a>
        
          <div class="summary"><p>Add <code>JOIN</code> clause by <em>reference</em>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#join%28table%3AString%2Con%3AString%2C%2A%2Ctype_type%3AJoinType%3D%3Ainner%2Cas_as%3AString%3F%3Dnil%29-instance-method" class="signature"><strong>#join</strong>(table : String, on : String, *, type _type : JoinType = <span class="n">:inner</span>, as _as : String? = <span class="n">nil</span>)</a>
        
          <div class="summary"><p>Add <code>JOIN</code> clause by <em>table</em> <em>on</em>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#last-instance-method" class="signature"><strong>#last</strong></a>
        
          <div class="summary"><p>Alias of <code><a href="../Atom/Query.html#order_by%28value%3AT%3A%3AAttribute%7CString%2Corder%3AOrder%3F%3DOrder%3A%3AAsc%29-instance-method">#order_by(T.primary_key, :desc)</a><a href="../Atom/Query.html#one-instance-method">.one</a></code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#left_join%28reference%3AT%3A%3AReference%2C%2A%2Anargs%29-instance-method" class="signature"><strong>#left_join</strong>(reference : T::Reference, **nargs)</a>
        
          <div class="summary"><p>Alias of <code>#join(reference, type: :left)</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#left_join%28table%3AString%2Con%3AString%29-instance-method" class="signature"><strong>#left_join</strong>(table : String, on : String)</a>
        
          <div class="summary"><p>Alias of <code>#join(table, on, type: :left)</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#limit%28limit%3AInt32%3F%3Dnil%29-instance-method" class="signature"><strong>#limit</strong>(limit : Int32? = <span class="n">nil</span>)</a>
        
          <div class="summary"><p>Add <code>LIMIT</code> clause.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#offset%28offset%3AInt32%3F%29-instance-method" class="signature"><strong>#offset</strong>(offset : Int32?)</a>
        
          <div class="summary"><p>Add <code>OFFSET</code> clause.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#one-instance-method" class="signature"><strong>#one</strong></a>
        
          <div class="summary"><p>Alias of <code><a href="../Atom/Query.html#limit%28limit%3AInt32%3F%3Dnil%29-instance-method">#limit(1)</a></code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#or-instance-method" class="signature"><strong>#or</strong></a>
        
          <div class="summary"><p>A shorthand for calling <code><a href="../Atom/Query.html#or_where-instance-method">#or_where</a></code> or <code><a href="../Atom/Query.html#or_having%28clause%3AString%29-instance-method">#or_having</a></code> depending on the latest call.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#or_having%28clause%3AString%29-instance-method" class="signature"><strong>#or_having</strong>(clause : String)</a>
        
          <div class="summary"><p>Add <code>OR</code> <em>clause</em> to <code>HAVING</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#or_having%28clause%3AString%2C%2Aparams%29-instance-method" class="signature"><strong>#or_having</strong>(clause : String, *params)</a>
        
          <div class="summary"><p>Add <code>OR</code> <em>clause</em> with <em>params</em> to <code>HAVING</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#or_having_not%28clause%3AString%29-instance-method" class="signature"><strong>#or_having_not</strong>(clause : String)</a>
        
          <div class="summary"><p>Add <code>OR NOT</code> <em>clause</em> to <code>HAVING</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#or_having_not%28clause%3AString%2C%2Aparams%29-instance-method" class="signature"><strong>#or_having_not</strong>(clause : String, *params)</a>
        
          <div class="summary"><p>Add <code>OR NOT</code> <em>clause</em> with <em>params</em> to <code>HAVING</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#or_not-instance-method" class="signature"><strong>#or_not</strong></a>
        
          <div class="summary"><p>A shorthand for calling <code><a href="../Atom/Query.html#or_where_not-instance-method">#or_where_not</a></code> or <code><a href="../Atom/Query.html#or_having_not%28clause%3AString%29-instance-method">#or_having_not</a></code> depending on the latest call.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#or_where%28clause%3AString%29-instance-method" class="signature"><strong>#or_where</strong>(clause : String)</a>
        
          <div class="summary"><p>Add <code>OR</code> <em>clause</em> to <code>WHERE</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#or_where%28clause%3AString%2C%2Aparams%29-instance-method" class="signature"><strong>#or_where</strong>(clause : String, *params)</a>
        
          <div class="summary"><p>Add <code>OR</code> <em>clause</em> with <em>params</em> to <code>WHERE</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#or_where-instance-method" class="signature"><strong>#or_where</strong></a>
        
          <div class="summary"><p>Add <code>OR</code> clause with named arguments to <code>WHERE</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#or_where_not%28clause%3AString%29-instance-method" class="signature"><strong>#or_where_not</strong>(clause : String)</a>
        
          <div class="summary"><p>Add <code>OR NOT</code> <em>clause</em> to <code>WHERE</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#or_where_not%28clause%3AString%2C%2Aparams%29-instance-method" class="signature"><strong>#or_where_not</strong>(clause : String, *params)</a>
        
          <div class="summary"><p>Add <code>OR NOT</code> <em>clause</em> with <em>params</em> to <code>WHERE</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#or_where_not-instance-method" class="signature"><strong>#or_where_not</strong></a>
        
          <div class="summary"><p>Add <code>OR NOT</code> clause with named arguments to <code>WHERE</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#order_by%28value%3AT%3A%3AAttribute%7CString%2Corder%3AOrder%3F%3DOrder%3A%3AAsc%29-instance-method" class="signature"><strong>#order_by</strong>(value : T::Attribute | String, order : Order? = <span class="t">Order</span><span class="t">::</span><span class="t">Asc</span>)</a>
        
          <div class="summary"><p>Add <code>ORDER BY</code> clause.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#params%3AArray%28DB%3A%3AAny%7CArray%28DB%3A%3AAny%29%29%3F-instance-method" class="signature"><strong>#params</strong> : Array(DB::Any | Array(DB::Any))?</a>
        
          <div class="summary"><p>An array of DB params for this query.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#returning-instance-method" class="signature"><strong>#returning</strong></a>
        
          <div class="summary"><p>It's a public property because it's smart to allow repository to change <code><a href="../Atom/Query.html#returning-instance-method">#returning</a></code> based on query type (query, exec or scalar).</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#returning%28%2Avalues%3AT%3A%3AAttribute%7CString%7CChar%29-instance-method" class="signature"><strong>#returning</strong>(*values : T::Attribute | String | Char)</a>
        
          <div class="summary"><p>Add <code>RETURNING</code> clause.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#returning%3D%28returning%29-instance-method" class="signature"><strong>#returning=</strong>(returning)</a>
        
          <div class="summary"><p>It's a public property because it's smart to allow repository to change <code><a href="../Atom/Query.html#returning-instance-method">#returning</a></code> based on query type (query, exec or scalar).</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#right_join%28table%3AString%2Con%3AString%29-instance-method" class="signature"><strong>#right_join</strong>(table : String, on : String)</a>
        
          <div class="summary"><p>Alias of <code>#join(table, on, type: :right)</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#right_join%28reference%3AT%3A%3AReference%2C%2A%2Anargs%29-instance-method" class="signature"><strong>#right_join</strong>(reference : T::Reference, **nargs)</a>
        
          <div class="summary"><p>Alias of <code>#join(reference, type: :right)</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#select%28%2Avalues%3AT.class%7CT%3A%3AAttribute%7CString%7CChar%29-instance-method" class="signature"><strong>#select</strong>(*values : T.class | T::Attribute | String | Char)</a>
        
          <div class="summary"><p>Add <code>SELECT</code> clause.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#set%28clause%3AString%29-instance-method" class="signature"><strong>#set</strong>(clause : String)</a>
        
          <div class="summary"><p>Add <code>SET</code> clause without params.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#set%28clause%3AString%2C%2Aparams%3ADB%3A%3AAny%7CArray%28DB%3A%3AAny%29%29-instance-method" class="signature"><strong>#set</strong>(clause : String, *params : DB::Any | Array(DB::Any))</a>
        
          <div class="summary"><p>Add <code>SET</code> clause with params.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#set%3AselfforallValues-instance-method" class="signature"><strong>#set</strong> : self forall Values</a>
        
          <div class="summary"><p>Add <code>SET</code> clause with named arguments.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#to_s-instance-method" class="signature"><strong>#to_s</strong></a>
        
          <div class="summary"><p>Build this query into plain SQL string.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#type%3AType-instance-method" class="signature"><strong>#type</strong> : Type</a>
        
          <div class="summary"><p>This query <code><a href="../Atom/Query/Type.html">Type</a></code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#type%3D%28type%3AType%29-instance-method" class="signature"><strong>#type=</strong>(type : Type)</a>
        
          <div class="summary"><p>This query <code><a href="../Atom/Query/Type.html">Type</a></code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#update-instance-method" class="signature"><strong>#update</strong></a>
        
          <div class="summary"><p>Mark this query as update one.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#where%28clause%3AString%2C%2Aparams%3ADB%3A%3AAny%7CArray%28DB%3A%3AAny%29%2Cor%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%29-instance-method" class="signature"><strong>#where</strong>(clause : String, *params : DB::Any | Array(DB::Any), or : Bool = <span class="n">false</span>, not : Bool = <span class="n">false</span>)</a>
        
          <div class="summary"><p>Add <code>WHERE</code> <em>clause</em> with <em>params</em>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#where%28or%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%2C%2A%2Avalues%3A%2A%2AValues%29%3AselfforallValues-instance-method" class="signature"><strong>#where</strong>(or : Bool = <span class="n">false</span>, not : Bool = <span class="n">false</span>, **values : **Values) : self forall Values</a>
        
          <div class="summary"><p>Add <code>WHERE</code> clause with named arguments.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#where%28clause%3AString%2Cor%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%29-instance-method" class="signature"><strong>#where</strong>(clause : String, or : Bool = <span class="n">false</span>, not : Bool = <span class="n">false</span>)</a>
        
          <div class="summary"><p>Add <code>WHERE</code> <em>clause</em> without params.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#where_not-instance-method" class="signature"><strong>#where_not</strong></a>
        
          <div class="summary"><p>Add <code>NOT</code> clause with named arguments to <code>WHERE</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#where_not%28clause%2C%2Aparams%29-instance-method" class="signature"><strong>#where_not</strong>(clause, *params)</a>
        
          <div class="summary"><p>Add <code>NOT</code> <em>clause</em> with <em>params</em> to <code>WHERE</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#where_not%28clause%29-instance-method" class="signature"><strong>#where_not</strong>(clause)</a>
        
          <div class="summary"><p>Add <code>NOT</code> <em>clause</em> to <code>WHERE</code>.</p></div>
        
      </li>
    
  </ul>





<div class="methods-inherited">
  
    


    


    


  
    


    


    


  
    


    


    


  
</div>


  <h2>Constructor Detail</h2>
  
    <div class="entry-detail" id="new-class-method">
      <div class="signature">
        
        def self.<strong>new</strong>

        <a class="method-permalink" href="#new-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/group_by.cr#L2" target="_blank">View source</a>]
        
      </div>
    </div>
  





  <h2>Instance Method Detail</h2>
  
    <div class="entry-detail" id="all-instance-method">
      <div class="signature">
        
        def <strong>all</strong>

        <a class="method-permalink" href="#all-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Alias of <code><a href="../Atom/Query.html#limit%28limit%3AInt32%3F%3Dnil%29-instance-method">#limit(nil)</a></code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L59" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="and-instance-method">
      <div class="signature">
        
        def <strong>and</strong>

        <a class="method-permalink" href="#and-instance-method">#</a>
      </div>
      
        <div class="doc"><p>A shorthand for calling <code><a href="../Atom/Query.html#and_where-instance-method">#and_where</a></code> or <code><a href="../Atom/Query.html#and_having%28clause%3AString%2C%2Aparams%29-instance-method">#and_having</a></code> depending on the latest call.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L138" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="and_having(clause:String,*params)-instance-method">
      <div class="signature">
        
        def <strong>and_having</strong>(clause : String, *params)

        <a class="method-permalink" href="#and_having%28clause%3AString%2C%2Aparams%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>AND</code> <em>clause</em> with <em>params</em> to <code>HAVING</code>.</p>

<pre><code>and_having(<span class="s">&quot;count = ?&quot;</span>, <span class="n">42</span>)
<span class="c"># HAVING (...) AND (count = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/having.cr#L98" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="and_having(clause:String)-instance-method">
      <div class="signature">
        
        def <strong>and_having</strong>(clause : String)

        <a class="method-permalink" href="#and_having%28clause%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>AND</code> <em>clause</em> to <code>HAVING</code>.</p>

<pre><code>and_having(<span class="s">&quot;count = 42&quot;</span>)
<span class="c"># HAVING (...) AND (count = 42)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/having.cr#L98" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="and_having_not(clause:String,*params)-instance-method">
      <div class="signature">
        
        def <strong>and_having_not</strong>(clause : String, *params)

        <a class="method-permalink" href="#and_having_not%28clause%3AString%2C%2Aparams%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>AND NOT</code> <em>clause</em> with <em>params</em> to <code>HAVING</code>.</p>

<pre><code>and_having_not(<span class="s">&quot;count = ?&quot;</span>, <span class="n">42</span>)
<span class="c"># HAVING (...) AND NOT (count = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/having.cr#L98" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="and_having_not(clause:String)-instance-method">
      <div class="signature">
        
        def <strong>and_having_not</strong>(clause : String)

        <a class="method-permalink" href="#and_having_not%28clause%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>AND NOT</code> <em>clause</em> to <code>HAVING</code>.</p>

<pre><code>and_having_not(<span class="s">&quot;count = 42&quot;</span>)
<span class="c"># HAVING (...) AND NOT (count = 42)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/having.cr#L98" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="and_not-instance-method">
      <div class="signature">
        
        def <strong>and_not</strong>

        <a class="method-permalink" href="#and_not-instance-method">#</a>
      </div>
      
        <div class="doc"><p>A shorthand for calling <code><a href="../Atom/Query.html#and_where_not-instance-method">#and_where_not</a></code> or <code><a href="../Atom/Query.html#and_having_not%28clause%3AString%2C%2Aparams%29-instance-method">#and_having_not</a></code> depending on the latest call.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L138" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="and_where-instance-method">
      <div class="signature">
        
        def <strong>and_where</strong>

        <a class="method-permalink" href="#and_where-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>AND</code> clause with named arguments to <code>WHERE</code>.</p>

<pre><code>and_where(id: <span class="n">42</span>)
<span class="c"># WHERE (...) AND (id = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L227" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="and_where(clause:String,*params)-instance-method">
      <div class="signature">
        
        def <strong>and_where</strong>(clause : String, *params)

        <a class="method-permalink" href="#and_where%28clause%3AString%2C%2Aparams%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>AND</code> <em>clause</em> with <em>params</em> to <code>WHERE</code>.</p>

<pre><code>and_where(<span class="s">&quot;id = ?&quot;</span>, <span class="n">42</span>)
<span class="c"># WHERE (...) AND (id = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L227" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="and_where(clause:String)-instance-method">
      <div class="signature">
        
        def <strong>and_where</strong>(clause : String)

        <a class="method-permalink" href="#and_where%28clause%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>AND</code> <em>clause</em> to <code>WHERE</code>.</p>

<pre><code>and_where(<span class="s">&quot;id = 42&quot;</span>)
<span class="c"># WHERE (...) AND (id = 42)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L227" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="and_where_not-instance-method">
      <div class="signature">
        
        def <strong>and_where_not</strong>

        <a class="method-permalink" href="#and_where_not-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>AND NOT</code> clause with named arguments to <code>WHERE</code>.</p>

<pre><code>and_where_not(id: <span class="n">42</span>)
<span class="c"># WHERE (...) AND NOT (id = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L227" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="and_where_not(clause:String,*params)-instance-method">
      <div class="signature">
        
        def <strong>and_where_not</strong>(clause : String, *params)

        <a class="method-permalink" href="#and_where_not%28clause%3AString%2C%2Aparams%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>AND NOT</code> <em>clause</em> with <em>params</em> to <code>WHERE</code>.</p>

<pre><code>and_where_not(<span class="s">&quot;id = ?&quot;</span>, <span class="n">42</span>)
<span class="c"># WHERE (...) AND NOT (id = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L227" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="and_where_not(clause:String)-instance-method">
      <div class="signature">
        
        def <strong>and_where_not</strong>(clause : String)

        <a class="method-permalink" href="#and_where_not%28clause%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>AND NOT</code> <em>clause</em> to <code>WHERE</code>.</p>

<pre><code>and_where_not(<span class="s">&quot;id = 42&quot;</span>)
<span class="c"># WHERE (...) AND NOT (id = 42)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L227" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="delete-instance-method">
      <div class="signature">
        
        def <strong>delete</strong>

        <a class="method-permalink" href="#delete-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Mark this query as delete one. You may want to call <code><a href="../Atom/Query.html#where%28clause%3AString%2C%2Aparams%3ADB%3A%3AAny%7CArray%28DB%3A%3AAny%29%2Cor%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%29-instance-method">#where</a></code> afterwards.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L39" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="dup-instance-method">
      <div class="signature">
        
        def <strong>dup</strong>

        <a class="method-permalink" href="#dup-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Duplicates this query.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L48" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="first-instance-method">
      <div class="signature">
        
        def <strong>first</strong>

        <a class="method-permalink" href="#first-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Alias of <code><a href="../Atom/Query.html#order_by%28value%3AT%3A%3AAttribute%7CString%2Corder%3AOrder%3F%3DOrder%3A%3AAsc%29-instance-method">#order_by(T.primary_key, :asc)</a><a href="../Atom/Query.html#one-instance-method">.one</a></code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L69" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="full_join(reference:T::Reference,**nargs)-instance-method">
      <div class="signature">
        
        def <strong>full_join</strong>(reference : T::Reference, **nargs)

        <a class="method-permalink" href="#full_join%28reference%3AT%3A%3AReference%2C%2A%2Anargs%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Alias of <code>#join(reference, type: :full)</code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/join.cr#L128" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="full_join(table:String,on:String)-instance-method">
      <div class="signature">
        
        def <strong>full_join</strong>(table : String, on : String)

        <a class="method-permalink" href="#full_join%28table%3AString%2Con%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Alias of <code>#join(table, on, type: :full)</code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/join.cr#L128" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="group_by(*values:String)-instance-method">
      <div class="signature">
        
        def <strong>group_by</strong>(*values : String)

        <a class="method-permalink" href="#group_by%28%2Avalues%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>GROUP_BY</code> clause.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/group_by.cr#L7" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="having(clause:String,*params:DB::Any|Array(DB::Any),or:Bool=false,not:Bool=false)-instance-method">
      <div class="signature">
        
        def <strong>having</strong>(clause : String, *params : DB::Any | Array(DB::Any), or : Bool = <span class="n">false</span>, not : Bool = <span class="n">false</span>)

        <a class="method-permalink" href="#having%28clause%3AString%2C%2Aparams%3ADB%3A%3AAny%7CArray%28DB%3A%3AAny%29%2Cor%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>HAVING</code> <em>clause</em> with <em>params</em>.</p>

<pre><code>query.having(<span class="s">&quot;COUNT(tags.id) &gt; ?&quot;</span>, <span class="n">5</span>) <span class="c"># HAVING (COUNT(tags.id) &gt; ?)</span></code></pre>

<p>Multiple calls concatenate clauses with <code>AND</code>:</p>

<pre><code>query.having(<span class="s">&quot;COUNT(tags.id) &gt; ?&quot;</span>, <span class="n">5</span>).having(<span class="s">&quot;foo = ?&quot;</span>, <span class="s">&quot;bar&quot;</span>)
<span class="c"># HAVING (COUNT(tags.id) &gt; ?) AND (foo = ?)</span></code></pre>

<p>See also <code><a href="../Atom/Query.html#and-instance-method">#and</a></code>, <code><a href="../Atom/Query.html#or-instance-method">#or</a></code>, <code><a href="../Atom/Query.html#and_having%28clause%3AString%2C%2Aparams%29-instance-method">#and_having</a></code>, <code><a href="../Atom/Query.html#and_having_not%28clause%3AString%2C%2Aparams%29-instance-method">#and_having_not</a></code>, <code><a href="../Atom/Query.html#or_having%28clause%3AString%29-instance-method">#or_having</a></code>, <code><a href="../Atom/Query.html#or_having_not%28clause%3AString%29-instance-method">#or_having_not</a></code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/having.cr#L32" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="having(clause:String,or:Bool=false,not:Bool=false)-instance-method">
      <div class="signature">
        
        def <strong>having</strong>(clause : String, or : Bool = <span class="n">false</span>, not : Bool = <span class="n">false</span>)

        <a class="method-permalink" href="#having%28clause%3AString%2Cor%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>HAVING</code> <em>clause</em> without params.</p>

<pre><code>query.having(<span class="s">&quot;COUNT(tags.id) &gt; 5&quot;</span>) <span class="c"># HAVING (COUNT(tags.id) &gt; 5)</span></code></pre>

<p>Multiple calls concatenate clauses with <code>AND</code>:</p>

<pre><code>query.having(<span class="s">&quot;COUNT(tags.id) &gt; 5&quot;</span>).having(<span class="s">&quot;foo = &#39;bar&#39;&quot;</span>)
<span class="c"># HAVING (COUNT(tags.id) &gt; 5) AND (foo = &#39;bar&#39;)</span></code></pre>

<p>See also <code><a href="../Atom/Query.html#and-instance-method">#and</a></code>, <code><a href="../Atom/Query.html#or-instance-method">#or</a></code>, <code><a href="../Atom/Query.html#and_having%28clause%3AString%2C%2Aparams%29-instance-method">#and_having</a></code>, <code><a href="../Atom/Query.html#and_having_not%28clause%3AString%2C%2Aparams%29-instance-method">#and_having_not</a></code>, <code><a href="../Atom/Query.html#or_having%28clause%3AString%29-instance-method">#or_having</a></code>, <code><a href="../Atom/Query.html#or_having_not%28clause%3AString%29-instance-method">#or_having_not</a></code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/having.cr#L65" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="having_not(clause,*params)-instance-method">
      <div class="signature">
        
        def <strong>having_not</strong>(clause, *params)

        <a class="method-permalink" href="#having_not%28clause%2C%2Aparams%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>NOT</code> <em>clause</em> with <em>params</em> to <code>HAVING</code>.</p>

<pre><code>having_not(<span class="s">&quot;count = ?&quot;</span>, <span class="n">42</span>)
<span class="c"># HAVING (...) AND NOT (count = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/having.cr#L84" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="having_not(clause)-instance-method">
      <div class="signature">
        
        def <strong>having_not</strong>(clause)

        <a class="method-permalink" href="#having_not%28clause%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>NOT</code> <em>clause</em> to <code>HAVING</code>.</p>

<pre><code>having_not(<span class="s">&quot;count = 42&quot;</span>)
<span class="c"># HAVING (...) AND NOT (count = 42)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/having.cr#L94" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="insert:selfforallValues-instance-method">
      <div class="signature">
        
        def <strong>insert</strong> : self forall Values

        <a class="method-permalink" href="#insert%3AselfforallValues-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>INSERT</code> clause. Marks the query as insert one.</p>

<p>Arguments are validated at compilation time. To pass the validation, an argument type must be <code><=</code> compared to the defined attribute type:</p>

<pre><code><span class="k">class</span> <span class="t">User</span>
  schema users <span class="k">do</span>
    <span class="k">type</span> id : <span class="t">Int32</span> <span class="o">=</span> <span class="t">DB</span><span class="t">::</span><span class="t">Default</span>
    <span class="k">type</span> active : <span class="t">Bool</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">User</span>.insert(id: <span class="n">42</span>, active: <span class="n">true</span>)  <span class="c"># INSERT INTO users (id, active) VALUES (?, ?)</span>
<span class="t">User</span>.insert(unknown: <span class="s">&quot;foo&quot;</span>)        <span class="c"># Compilation time error</span>
<span class="t">User</span>.insert(id: <span class="n">42</span>, active: <span class="s">&quot;foo&quot;</span>) <span class="c"># Compilation time error</span></code></pre>

<p>Special value <code><a href="../DB/Default.html">DB::Default</a></code> is allowed too, however, it's to be skipped in the final INSERT clause:</p>

<pre><code><span class="t">User</span>.insert(id: <span class="t">DB</span><span class="t">::</span><span class="t">Default</span>, active: <span class="n">false</span>) <span class="c"># INSERT INTO users (active) VALUES (?)</span></code></pre>

<p>This method expects <strong>all</strong> non-nilable and non-default values to be set:</p>

<pre><code><span class="t">User</span>.insert(id: <span class="n">42</span>) <span class="c"># Compilation time error because `active` is not set</span></code></pre>

<p><span class="flag purple">NOTE</span>  If all values to insert are default, please use <code>INSERT INTO table DEFAULT VALUES</code> SQL instead.</p>

<p><span class="flag orange">TODO</span>  Allow insert all defaults (change from skipping to <code>(key) VALUES (DEFAULT)</code>).</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/insert.cr#L53" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="join(reference:T::Reference,*,type_type:JoinType=:inner,as_as:String=reference.to_s.underscore,select_select:Char|String|Enumerable(String|Char)|Nil=nil)-instance-method">
      <div class="signature">
        
        def <strong>join</strong>(reference : T::Reference, *, type _type : <a href="../Atom/Query/JoinType.html">JoinType</a> = <span class="n">:inner</span>, as _as : String = reference.to_s.underscore, select _select : Char | String | Enumerable(String | Char) | Nil = <span class="n">nil</span>)

        <a class="method-permalink" href="#join%28reference%3AT%3A%3AReference%2C%2A%2Ctype_type%3AJoinType%3D%3Ainner%2Cas_as%3AString%3Dreference.to_s.underscore%2Cselect_select%3AChar%7CString%7CEnumerable%28String%7CChar%29%7CNil%3Dnil%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>JOIN</code> clause by <em>reference</em>.</p>

<pre><code><span class="k">class</span> <span class="t">User</span>
  schema users <span class="k">do</span>
    pkey id : <span class="t">Int32</span>
    <span class="k">type</span> posts : <span class="t">Array</span>(<span class="t">Post</span>), foreign_key: <span class="s">&quot;author_id&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="t">Post</span>
  schema posts <span class="k">do</span>
    pkey id : <span class="t">Int32</span>
    <span class="k">type</span> author : <span class="t">User</span>, key: <span class="s">&quot;author_id&quot;</span>
    <span class="k">type</span> content : <span class="t">String</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">Post</span>.join(<span class="n">:author</span>)
<span class="c"># SELECT posts.* FROM posts JOIN users ON posts.author_id = author.id AS author</span>

<span class="t">User</span>.join(<span class="n">:posts</span>, <span class="k">select</span>: {<span class="t">Post</span>.id, <span class="t">Post</span>.content})
<span class="c"># SELECT users.*, &#39;&#39; AS _posts, posts.id, posts.content FROM users JOIN posts ON posts.author_id = users.id</span></code></pre>

<p>If <code><a href="../Atom/Query.html#select%28%2Avalues%3AT.class%7CT%3A%3AAttribute%7CString%7CChar%29-instance-method">#select</a></code> hasn't been called before, a <code><a href="../Atom/Query.html#select%28%2Avalues%3AT.class%7CT%3A%3AAttribute%7CString%7CChar%29-instance-method">#select(T)</a></code> call is made to ensure the model itself is selected along with the joined reference.</p>

<p>Note that if you call <code><a href="../Atom/Query.html#select%28%2Avalues%3AT.class%7CT%3A%3AAttribute%7CString%7CChar%29-instance-method">#select</a></code> with any of curent model columns <strong>after</strong> <code><a href="../Atom/Query.html#join%28reference%3AT%3A%3AReference%2C%2A%2Ctype_type%3AJoinType%3D%3Ainner%2Cas_as%3AString%3Dreference.to_s.underscore%2Cselect_select%3AChar%7CString%7CEnumerable%28String%7CChar%29%7CNil%3Dnil%29-instance-method">#join</a></code> for the first time, it will lead to repeated columns and therefore to <code>DB::MappingException</code>:</p>

<pre><code><span class="t">Post</span>.join(<span class="n">:author</span>, <span class="k">select</span>: {<span class="s">&quot;id&quot;</span>}).<span class="k">select</span>(<span class="n">:id</span>)
<span class="c"># SELECT posts.*, &#39;&#39; AS author, author.id, posts.id ...</span>
<span class="c">#                                                ^ error</span>

<span class="t">Post</span>.<span class="k">select</span>(<span class="n">:id</span>).join(<span class="n">:author</span>, <span class="k">select</span>: {<span class="s">&quot;id&quot;</span>})
<span class="c"># SELECT posts.id, &#39;&#39; AS author, author.id</span>
<span class="c"># OK                                        ^ error</span>

<span class="t">Post</span>.<span class="k">select</span>(<span class="n">:id</span>).join(<span class="n">:author</span>, <span class="k">select</span>: {<span class="s">&quot;id&quot;</span>}).<span class="k">select</span>(<span class="n">:content</span>)
<span class="c"># SELECT posts.id, &#39;&#39; AS author, author.id, posts.content</span>
<span class="c"># OK, but may lead to confusion if author has &quot;content&quot; column</span></code></pre>

<p><span class="flag purple">NOTE</span>  Direct enumerable reference joins are forbidden at the moment, e.g. you can't join <code>:tags</code> with <code>type tags : Array(Tag), key: "tag_ids"</code>.</p>

<p><span class="flag purple">NOTE</span>  <em>select</em>s are modified like <code>"{as}.{select}"</code>.</p>

<p><span class="flag orange">TODO</span>  Allow to <code>select:</code> by <em>reference</em> <code>Attrubute</code>, e.g. <code>select: {:content}</code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/join.cr#L96" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="join(table:String,on:String,*,type_type:JoinType=:inner,as_as:String?=nil)-instance-method">
      <div class="signature">
        
        def <strong>join</strong>(table : String, on : String, *, type _type : <a href="../Atom/Query/JoinType.html">JoinType</a> = <span class="n">:inner</span>, as _as : String? = <span class="n">nil</span>)

        <a class="method-permalink" href="#join%28table%3AString%2Con%3AString%2C%2A%2Ctype_type%3AJoinType%3D%3Ainner%2Cas_as%3AString%3F%3Dnil%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>JOIN</code> clause by <em>table</em> <em>on</em>.</p>

<pre><code><span class="t">Post</span>.join(<span class="s">&quot;users&quot;</span>, <span class="s">&quot;author.id = posts.author_id&quot;</span>, <span class="k">as</span>: <span class="s">&quot;author&quot;</span>)
<span class="c"># SELECT FROM posts JOIN users ON author.id = posts.author_id AS author</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/join.cr#L36" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="last-instance-method">
      <div class="signature">
        
        def <strong>last</strong>

        <a class="method-permalink" href="#last-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Alias of <code><a href="../Atom/Query.html#order_by%28value%3AT%3A%3AAttribute%7CString%2Corder%3AOrder%3F%3DOrder%3A%3AAsc%29-instance-method">#order_by(T.primary_key, :desc)</a><a href="../Atom/Query.html#one-instance-method">.one</a></code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L74" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="left_join(reference:T::Reference,**nargs)-instance-method">
      <div class="signature">
        
        def <strong>left_join</strong>(reference : T::Reference, **nargs)

        <a class="method-permalink" href="#left_join%28reference%3AT%3A%3AReference%2C%2A%2Anargs%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Alias of <code>#join(reference, type: :left)</code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/join.cr#L128" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="left_join(table:String,on:String)-instance-method">
      <div class="signature">
        
        def <strong>left_join</strong>(table : String, on : String)

        <a class="method-permalink" href="#left_join%28table%3AString%2Con%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Alias of <code>#join(table, on, type: :left)</code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/join.cr#L128" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="limit(limit:Int32?=nil)-instance-method">
      <div class="signature">
        
        def <strong>limit</strong>(limit : Int32? = <span class="n">nil</span>)

        <a class="method-permalink" href="#limit%28limit%3AInt32%3F%3Dnil%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>LIMIT</code> clause. Unset with <code>nil</code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/limit.cr#L7" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="offset(offset:Int32?)-instance-method">
      <div class="signature">
        
        def <strong>offset</strong>(offset : Int32?)

        <a class="method-permalink" href="#offset%28offset%3AInt32%3F%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>OFFSET</code> clause. Unset with <code>nil</code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/offset.cr#L7" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="one-instance-method">
      <div class="signature">
        
        def <strong>one</strong>

        <a class="method-permalink" href="#one-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Alias of <code><a href="../Atom/Query.html#limit%28limit%3AInt32%3F%3Dnil%29-instance-method">#limit(1)</a></code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L64" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="or-instance-method">
      <div class="signature">
        
        def <strong>or</strong>

        <a class="method-permalink" href="#or-instance-method">#</a>
      </div>
      
        <div class="doc"><p>A shorthand for calling <code><a href="../Atom/Query.html#or_where-instance-method">#or_where</a></code> or <code><a href="../Atom/Query.html#or_having%28clause%3AString%29-instance-method">#or_having</a></code> depending on the latest call.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L138" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="or_having(clause:String)-instance-method">
      <div class="signature">
        
        def <strong>or_having</strong>(clause : String)

        <a class="method-permalink" href="#or_having%28clause%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>OR</code> <em>clause</em> to <code>HAVING</code>.</p>

<pre><code>or_having(<span class="s">&quot;count = 42&quot;</span>)
<span class="c"># HAVING (...) OR (count = 42)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/having.cr#L98" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="or_having(clause:String,*params)-instance-method">
      <div class="signature">
        
        def <strong>or_having</strong>(clause : String, *params)

        <a class="method-permalink" href="#or_having%28clause%3AString%2C%2Aparams%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>OR</code> <em>clause</em> with <em>params</em> to <code>HAVING</code>.</p>

<pre><code>or_having(<span class="s">&quot;count = ?&quot;</span>, <span class="n">42</span>)
<span class="c"># HAVING (...) OR (count = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/having.cr#L98" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="or_having_not(clause:String)-instance-method">
      <div class="signature">
        
        def <strong>or_having_not</strong>(clause : String)

        <a class="method-permalink" href="#or_having_not%28clause%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>OR NOT</code> <em>clause</em> to <code>HAVING</code>.</p>

<pre><code>or_having_not(<span class="s">&quot;count = 42&quot;</span>)
<span class="c"># HAVING (...) OR NOT (count = 42)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/having.cr#L98" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="or_having_not(clause:String,*params)-instance-method">
      <div class="signature">
        
        def <strong>or_having_not</strong>(clause : String, *params)

        <a class="method-permalink" href="#or_having_not%28clause%3AString%2C%2Aparams%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>OR NOT</code> <em>clause</em> with <em>params</em> to <code>HAVING</code>.</p>

<pre><code>or_having_not(<span class="s">&quot;count = ?&quot;</span>, <span class="n">42</span>)
<span class="c"># HAVING (...) OR NOT (count = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/having.cr#L98" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="or_not-instance-method">
      <div class="signature">
        
        def <strong>or_not</strong>

        <a class="method-permalink" href="#or_not-instance-method">#</a>
      </div>
      
        <div class="doc"><p>A shorthand for calling <code><a href="../Atom/Query.html#or_where_not-instance-method">#or_where_not</a></code> or <code><a href="../Atom/Query.html#or_having_not%28clause%3AString%29-instance-method">#or_having_not</a></code> depending on the latest call.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L138" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="or_where(clause:String)-instance-method">
      <div class="signature">
        
        def <strong>or_where</strong>(clause : String)

        <a class="method-permalink" href="#or_where%28clause%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>OR</code> <em>clause</em> to <code>WHERE</code>.</p>

<pre><code>or_where(<span class="s">&quot;id = 42&quot;</span>)
<span class="c"># WHERE (...) OR (id = 42)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L227" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="or_where(clause:String,*params)-instance-method">
      <div class="signature">
        
        def <strong>or_where</strong>(clause : String, *params)

        <a class="method-permalink" href="#or_where%28clause%3AString%2C%2Aparams%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>OR</code> <em>clause</em> with <em>params</em> to <code>WHERE</code>.</p>

<pre><code>or_where(<span class="s">&quot;id = ?&quot;</span>, <span class="n">42</span>)
<span class="c"># WHERE (...) OR (id = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L227" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="or_where-instance-method">
      <div class="signature">
        
        def <strong>or_where</strong>

        <a class="method-permalink" href="#or_where-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>OR</code> clause with named arguments to <code>WHERE</code>.</p>

<pre><code>or_where(id: <span class="n">42</span>)
<span class="c"># WHERE (...) OR (id = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L227" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="or_where_not(clause:String)-instance-method">
      <div class="signature">
        
        def <strong>or_where_not</strong>(clause : String)

        <a class="method-permalink" href="#or_where_not%28clause%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>OR NOT</code> <em>clause</em> to <code>WHERE</code>.</p>

<pre><code>or_where_not(<span class="s">&quot;id = 42&quot;</span>)
<span class="c"># WHERE (...) OR NOT (id = 42)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L227" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="or_where_not(clause:String,*params)-instance-method">
      <div class="signature">
        
        def <strong>or_where_not</strong>(clause : String, *params)

        <a class="method-permalink" href="#or_where_not%28clause%3AString%2C%2Aparams%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>OR NOT</code> <em>clause</em> with <em>params</em> to <code>WHERE</code>.</p>

<pre><code>or_where_not(<span class="s">&quot;id = ?&quot;</span>, <span class="n">42</span>)
<span class="c"># WHERE (...) OR NOT (id = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L227" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="or_where_not-instance-method">
      <div class="signature">
        
        def <strong>or_where_not</strong>

        <a class="method-permalink" href="#or_where_not-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>OR NOT</code> clause with named arguments to <code>WHERE</code>.</p>

<pre><code>or_where_not(id: <span class="n">42</span>)
<span class="c"># WHERE (...) OR NOT (id = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L227" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="order_by(value:T::Attribute|String,order:Order?=Order::Asc)-instance-method">
      <div class="signature">
        
        def <strong>order_by</strong>(value : T::Attribute | String, order : <a href="../Atom/Query/Order.html">Order</a>? = <span class="t">Order</span><span class="t">::</span><span class="t">Asc</span>)

        <a class="method-permalink" href="#order_by%28value%3AT%3A%3AAttribute%7CString%2Corder%3AOrder%3F%3DOrder%3A%3AAsc%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>ORDER BY</code> clause. Similar to <code><a href="../Atom/Query.html#select%28%2Avalues%3AT.class%7CT%3A%3AAttribute%7CString%7CChar%29-instance-method">#select</a></code> and <code><a href="../Atom/Query.html#returning-instance-method">#returning</a></code>, if <em>value</em> is a Schema attribute, it's checked in compile-time:</p>

<pre><code><span class="t">User</span>.order_by(<span class="n">:uuid</span>, <span class="n">:desc</span>) <span class="c"># Would raise if `User` doesn&#39;t have attribute named `uuid`</span>
<span class="c"># ORDER BY uuid DESC</span>

<span class="t">User</span>.order_by(<span class="s">&quot;foo&quot;</span>) <span class="c"># Will not checked at compile-time</span>
<span class="c"># ORDER BY foo ASC</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/order_by.cr#L35" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="params:Array(DB::Any|Array(DB::Any))?-instance-method">
      <div class="signature">
        
        def <strong>params</strong> : Array(DB::Any | Array(DB::Any))?

        <a class="method-permalink" href="#params%3AArray%28DB%3A%3AAny%7CArray%28DB%3A%3AAny%29%29%3F-instance-method">#</a>
      </div>
      
        <div class="doc"><p>An array of DB params for this query. It's filled up only after <code><a href="../Atom/Query.html#to_s-instance-method">#to_s</a></code> call.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L45" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="returning-instance-method">
      <div class="signature">
        
        def <strong>returning</strong>

        <a class="method-permalink" href="#returning-instance-method">#</a>
      </div>
      
        <div class="doc"><p>It's a public property because it's smart to allow repository to change <code><a href="../Atom/Query.html#returning-instance-method">#returning</a></code> based on query type (query, exec or scalar).</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/returning.cr#L6" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="returning(*values:T::Attribute|String|Char)-instance-method">
      <div class="signature">
        
        def <strong>returning</strong>(*values : T::Attribute | String | Char)

        <a class="method-permalink" href="#returning%28%2Avalues%3AT%3A%3AAttribute%7CString%7CChar%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>RETURNING</code> clause.</p>

<p>Similar to <code><a href="../Atom/Query.html#select%28%2Avalues%3AT.class%7CT%3A%3AAttribute%7CString%7CChar%29-instance-method">#select</a></code> and <code><a href="../Atom/Query.html#order_by%28value%3AT%3A%3AAttribute%7CString%2Corder%3AOrder%3F%3DOrder%3A%3AAsc%29-instance-method">#order_by</a></code>, if <em>value</em> is a Schema attribute, it's checked in compile-time:</p>

<pre><code><span class="t">User</span>.insert(name: <span class="s">&quot;Foo&quot;</span>).returning(<span class="n">:id</span>) <span class="c"># Would raise in compile-time if `User` doesn&#39;t have attribute named `id`</span>
<span class="c"># INSERT INTO users (name) VALUES (?) RETURNING users.id</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/returning.cr#L16" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="returning=(returning)-instance-method">
      <div class="signature">
        
        def <strong>returning=</strong>(returning)

        <a class="method-permalink" href="#returning%3D%28returning%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>It's a public property because it's smart to allow repository to change <code><a href="../Atom/Query.html#returning-instance-method">#returning</a></code> based on query type (query, exec or scalar).</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/returning.cr#L6" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="right_join(table:String,on:String)-instance-method">
      <div class="signature">
        
        def <strong>right_join</strong>(table : String, on : String)

        <a class="method-permalink" href="#right_join%28table%3AString%2Con%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Alias of <code>#join(table, on, type: :right)</code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/join.cr#L128" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="right_join(reference:T::Reference,**nargs)-instance-method">
      <div class="signature">
        
        def <strong>right_join</strong>(reference : T::Reference, **nargs)

        <a class="method-permalink" href="#right_join%28reference%3AT%3A%3AReference%2C%2A%2Anargs%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Alias of <code>#join(reference, type: :right)</code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/join.cr#L128" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="select(*values:T.class|T::Attribute|String|Char)-instance-method">
      <div class="signature">
        
        def <strong>select</strong>(*values : T.class | T::Attribute | String | Char)

        <a class="method-permalink" href="#select%28%2Avalues%3AT.class%7CT%3A%3AAttribute%7CString%7CChar%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>SELECT</code> clause. Marks the query as select one.</p>

<p>Similar to <code><a href="../Atom/Query.html#returning-instance-method">#returning</a></code> and <code><a href="../Atom/Query.html#order_by%28value%3AT%3A%3AAttribute%7CString%2Corder%3AOrder%3F%3DOrder%3A%3AAsc%29-instance-method">#order_by</a></code>, if <em>value</em> is a Schema attribute, it's checked in compile-time:</p>

<pre><code><span class="t">User</span>.<span class="k">select</span>(<span class="n">:id</span>) <span class="c"># Would raise in compile-time if `User` doesn&#39;t have attribute named `id`</span>
<span class="c"># SELECT user.id FROM users</span>

<span class="t">User</span>.<span class="k">select</span>(<span class="s">&quot;foo&quot;</span>)
<span class="c"># SELECT foo FROM users</span></code></pre>

<p>If <code><a href="../Atom/Query.html#select%28%2Avalues%3AT.class%7CT%3A%3AAttribute%7CString%7CChar%29-instance-method">#select</a></code> is not called and the query type is select, a default <code>SELECT table.*</code> is appended.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/select.cr#L19" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="set(clause:String)-instance-method">
      <div class="signature">
        
        def <strong>set</strong>(clause : String)

        <a class="method-permalink" href="#set%28clause%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>SET</code> clause without params.</p>

<p>Marks the query as update one, however, should be called after <code><a href="../Atom/Query.html#update-instance-method">#update</a></code> for readability.</p>

<pre><code><span class="t">User</span>.update.set(<span class="s">&quot;updated_at = NOW()&quot;</span>)
<span class="c"># UPDATE users SET updated_at = NOW()</span>

<span class="t">User</span>.set(<span class="s">&quot;updated_at = NOW()&quot;</span>)
<span class="c"># ditto</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/set.cr#L53" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="set(clause:String,*params:DB::Any|Array(DB::Any))-instance-method">
      <div class="signature">
        
        def <strong>set</strong>(clause : String, *params : DB::Any | Array(DB::Any))

        <a class="method-permalink" href="#set%28clause%3AString%2C%2Aparams%3ADB%3A%3AAny%7CArray%28DB%3A%3AAny%29%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>SET</code> clause with params.</p>

<p>Marks the query as update one, however, should be called after <code><a href="../Atom/Query.html#update-instance-method">#update</a></code> for readability.</p>

<pre><code><span class="t">User</span>.update.set(<span class="s">&quot;name = ?&quot;</span>, <span class="s">&quot;foo&quot;</span>).where(id: <span class="n">42</span>)
<span class="c"># UPDATE users SET name = ? WHERE id = ?</span>

<span class="t">User</span>.set(<span class="s">&quot;name = ?&quot;</span>, <span class="s">&quot;foo&quot;</span>).where(id: <span class="n">42</span>)
<span class="c"># ditto</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/set.cr#L27" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="set:selfforallValues-instance-method">
      <div class="signature">
        
        def <strong>set</strong> : self forall Values

        <a class="method-permalink" href="#set%3AselfforallValues-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>SET</code> clause with named arguments. Marks the query as update one.</p>

<p>Arguments are validated at compilation time. To pass the validation, an argument type must be <code><=</code> compared to the defined attribute type:</p>

<pre><code><span class="k">class</span> <span class="t">User</span>
  schema users <span class="k">do</span>
    <span class="k">type</span> id : <span class="t">Int32</span>
    <span class="k">type</span> active : <span class="t">Bool</span> <span class="o">=</span> <span class="t">DB</span><span class="t">::</span><span class="t">Default</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">User</span>.update.set(active: <span class="n">false</span>).where(id: <span class="n">42</span>)
<span class="c"># UPDATE users SET active = ? WHERE id = ?</span>

<span class="t">User</span>.update.set(unknown: <span class="s">&quot;foo&quot;</span>) <span class="c"># Compilation time error</span>
<span class="t">User</span>.update.set(active: <span class="s">&quot;foo&quot;</span>)  <span class="c"># Compilation time error</span></code></pre>

<p>Special value <code><a href="../DB/Default.html">DB::Default</a></code> is allowed as well:</p>

<pre><code><span class="t">User</span>.update.set(active: <span class="t">DB</span><span class="t">::</span><span class="t">Default</span>) <span class="c"># UPDATE users SET active = DEFAULT</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/set.cr#L86" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="to_s-instance-method">
      <div class="signature">
        
        def <strong>to_s</strong>

        <a class="method-permalink" href="#to_s-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Build this query into plain SQL string. <code><a href="../Atom/Query.html#params%3AArray%28DB%3A%3AAny%7CArray%28DB%3A%3AAny%29%29%3F-instance-method">#params</a></code> are set after the query is built.</p>

<p>Depending on query <code><a href="../Atom/Query.html#type%3AType-instance-method">#type</a></code>, a list blocks to append differs:</p>

<ul><li>Insert query would append <code><a href="../Atom/Query.html#insert%3AselfforallValues-instance-method">#insert</a></code> and <code><a href="../Atom/Query.html#returning-instance-method">#returning</a></code> clauses</li><li>Select query would append <code><a href="../Atom/Query.html#select%28%2Avalues%3AT.class%7CT%3A%3AAttribute%7CString%7CChar%29-instance-method">#select</a></code>, <code><a href="../Atom/Query.html#join%28reference%3AT%3A%3AReference%2C%2A%2Ctype_type%3AJoinType%3D%3Ainner%2Cas_as%3AString%3Dreference.to_s.underscore%2Cselect_select%3AChar%7CString%7CEnumerable%28String%7CChar%29%7CNil%3Dnil%29-instance-method">#join</a></code>, <code><a href="../Atom/Query.html#where%28clause%3AString%2C%2Aparams%3ADB%3A%3AAny%7CArray%28DB%3A%3AAny%29%2Cor%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%29-instance-method">#where</a></code>, <code><a href="../Atom/Query.html#group_by%28%2Avalues%3AString%29-instance-method">#group_by</a></code>, <code><a href="../Atom/Query.html#having%28clause%3AString%2C%2Aparams%3ADB%3A%3AAny%7CArray%28DB%3A%3AAny%29%2Cor%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%29-instance-method">#having</a></code>, <code><a href="../Atom/Query.html#order_by%28value%3AT%3A%3AAttribute%7CString%2Corder%3AOrder%3F%3DOrder%3A%3AAsc%29-instance-method">#order_by</a></code>, <code><a href="../Atom/Query.html#limit%28limit%3AInt32%3F%3Dnil%29-instance-method">#limit</a></code> and <code><a href="../Atom/Query.html#offset%28offset%3AInt32%3F%29-instance-method">#offset</a></code> clauses</li><li>Update query would append <code><a href="../Atom/Query.html#set%3AselfforallValues-instance-method">#set</a></code>, <code><a href="../Atom/Query.html#where%28clause%3AString%2C%2Aparams%3ADB%3A%3AAny%7CArray%28DB%3A%3AAny%29%2Cor%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%29-instance-method">#where</a></code> and <code><a href="../Atom/Query.html#returning-instance-method">#returning</a></code> clauses</li><li>Delete query would append <code><a href="../Atom/Query.html#where%28clause%3AString%2C%2Aparams%3ADB%3A%3AAny%7CArray%28DB%3A%3AAny%29%2Cor%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%29-instance-method">#where</a></code> and <code><a href="../Atom/Query.html#returning-instance-method">#returning</a></code> clauses</li></ul>

<p><span class="flag purple">NOTE</span>  When calling <code><a href="../Atom/Repository.html#exec%28sql%3AString%2Cparams%3AEnumerable%28DB%3A%3AAny%7CArray%28DB%3A%3AAny%29%29%3F%3Dnil%29%3ADB%3A%3AExecResult-instance-method">Atom::Repository#exec</a></code> with insert, update or delete query, its <code><a href="../Atom/Query.html#returning-instance-method">#returning</a></code> is forced to be <code>nil</code>. Similarly, when calling <code><a href="../Atom/Repository.html#query%28klass%3AT.class%2Csql%3AString%2Cparams%3AEnumerable%28DB%3A%3AAny%7CArray%28DB%3A%3AAny%29%29%3F%3Dnil%29%3AArray%28T%29forallT-instance-method">Atom::Repository#query</a></code> with insert, update or delete query, <code><a href="../Atom/Query.html#returning-instance-method">#returning</a></code> is called with <code>'*'</code> if not set before.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L88" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="type:Type-instance-method">
      <div class="signature">
        
        def <strong>type</strong> : <a href="../Atom/Query/Type.html">Type</a>

        <a class="method-permalink" href="#type%3AType-instance-method">#</a>
      </div>
      
        <div class="doc"><p>This query <code><a href="../Atom/Query/Type.html">Type</a></code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L30" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="type=(type:Type)-instance-method">
      <div class="signature">
        
        def <strong>type=</strong>(type : <a href="../Atom/Query/Type.html">Type</a>)

        <a class="method-permalink" href="#type%3D%28type%3AType%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>This query <code><a href="../Atom/Query/Type.html">Type</a></code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L30" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="update-instance-method">
      <div class="signature">
        
        def <strong>update</strong>

        <a class="method-permalink" href="#update-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Mark this query as update one. Call <code><a href="../Atom/Query.html#set%3AselfforallValues-instance-method">#set</a></code> afterwards.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query.cr#L33" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="where(clause:String,*params:DB::Any|Array(DB::Any),or:Bool=false,not:Bool=false)-instance-method">
      <div class="signature">
        
        def <strong>where</strong>(clause : String, *params : DB::Any | Array(DB::Any), or : Bool = <span class="n">false</span>, not : Bool = <span class="n">false</span>)

        <a class="method-permalink" href="#where%28clause%3AString%2C%2Aparams%3ADB%3A%3AAny%7CArray%28DB%3A%3AAny%29%2Cor%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>WHERE</code> <em>clause</em> with <em>params</em>.</p>

<pre><code>query.where(<span class="s">&quot;id = ?&quot;</span>, <span class="n">42</span>) <span class="c"># WHERE (id = ?)</span></code></pre>

<p>Multiple calls concatenate clauses with <code>AND</code>:</p>

<pre><code>query.where(<span class="s">&quot;id = ?&quot;</span>, <span class="n">42</span>).where(<span class="s">&quot;foo = ?&quot;</span>, <span class="s">&quot;bar&quot;</span>)
<span class="c"># WHERE (id = ?) AND (foo = ?)</span></code></pre>

<p>See also <code><a href="../Atom/Query.html#and-instance-method">#and</a></code>, <code><a href="../Atom/Query.html#or-instance-method">#or</a></code>, <code><a href="../Atom/Query.html#and_where-instance-method">#and_where</a></code>, <code><a href="../Atom/Query.html#and_where_not-instance-method">#and_where_not</a></code>, <code><a href="../Atom/Query.html#or_where-instance-method">#or_where</a></code>, <code><a href="../Atom/Query.html#or_where_not-instance-method">#or_where_not</a></code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L32" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="where(or:Bool=false,not:Bool=false,**values:**Values):selfforallValues-instance-method">
      <div class="signature">
        
        def <strong>where</strong>(or : Bool = <span class="n">false</span>, not : Bool = <span class="n">false</span>, **values : **Values) : self forall Values

        <a class="method-permalink" href="#where%28or%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%2C%2A%2Avalues%3A%2A%2AValues%29%3AselfforallValues-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>WHERE</code> clause with named arguments. All clauses in a single call are concatenated with <code>AND</code>.</p>

<p>Arguments are validated at compilation time. To pass the validation, an argument type must be <code><=</code> compared to the defined attribute type:</p>

<pre><code><span class="k">class</span> <span class="t">User</span>
  schema users <span class="k">do</span>
    <span class="k">type</span> id : <span class="t">Int32</span>
    <span class="k">type</span> active : <span class="t">Bool</span> <span class="o">=</span> <span class="t">DB</span><span class="t">::</span><span class="t">Default</span>
    <span class="k">type</span> age : <span class="t">Int32</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">User</span>.where(active: <span class="n">true</span>, age: <span class="n">18</span>)
<span class="c"># SELECT users.* FROM users WHERE (active = ? AND age = ?)</span>

<span class="t">User</span>.where(unknown: <span class="s">&quot;foo&quot;</span>) <span class="c"># Compilation time error</span>
<span class="t">User</span>.where(age: <span class="s">&quot;foo&quot;</span>)     <span class="c"># Compilation time error</span></code></pre>

<p>See also <code><a href="../Atom/Query.html#and-instance-method">#and</a></code>, <code><a href="../Atom/Query.html#or-instance-method">#or</a></code>, <code><a href="../Atom/Query.html#and_where-instance-method">#and_where</a></code>, <code><a href="../Atom/Query.html#and_where_not-instance-method">#and_where_not</a></code>, <code><a href="../Atom/Query.html#or_where-instance-method">#or_where</a></code>, <code><a href="../Atom/Query.html#or_where_not-instance-method">#or_where_not</a></code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L99" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="where(clause:String,or:Bool=false,not:Bool=false)-instance-method">
      <div class="signature">
        
        def <strong>where</strong>(clause : String, or : Bool = <span class="n">false</span>, not : Bool = <span class="n">false</span>)

        <a class="method-permalink" href="#where%28clause%3AString%2Cor%3ABool%3Dfalse%2Cnot%3ABool%3Dfalse%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>WHERE</code> <em>clause</em> without params.</p>

<pre><code>query.where(<span class="s">&quot;id = 42&quot;</span>) <span class="c"># WHERE (id = 42)</span></code></pre>

<p>Multiple calls concatenate clauses with <code>AND</code>:</p>

<pre><code>query.where(<span class="s">&quot;id = ?=42&quot;</span>).where(<span class="s">&quot;foo = &#39;bar&#39;&quot;</span>)
<span class="c"># WHERE (id = 42) AND (foo = &#39;bar&#39;)</span></code></pre>

<p>See also <code><a href="../Atom/Query.html#and-instance-method">#and</a></code>, <code><a href="../Atom/Query.html#or-instance-method">#or</a></code>, <code><a href="../Atom/Query.html#and_where-instance-method">#and_where</a></code>, <code><a href="../Atom/Query.html#and_where_not-instance-method">#and_where_not</a></code>, <code><a href="../Atom/Query.html#or_where-instance-method">#or_where</a></code>, <code><a href="../Atom/Query.html#or_where_not-instance-method">#or_where_not</a></code>.</p></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L65" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="where_not-instance-method">
      <div class="signature">
        
        def <strong>where_not</strong>

        <a class="method-permalink" href="#where_not-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>NOT</code> clause with named arguments to <code>WHERE</code>.</p>

<pre><code>where_not(id: <span class="n">42</span>)
<span class="c"># WHERE (...) AND NOT (id = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L223" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="where_not(clause,*params)-instance-method">
      <div class="signature">
        
        def <strong>where_not</strong>(clause, *params)

        <a class="method-permalink" href="#where_not%28clause%2C%2Aparams%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>NOT</code> <em>clause</em> with <em>params</em> to <code>WHERE</code>.</p>

<pre><code>where_not(<span class="s">&quot;id = ?&quot;</span>, <span class="n">42</span>)
<span class="c"># WHERE (...) AND NOT (id = ?)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L203" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="where_not(clause)-instance-method">
      <div class="signature">
        
        def <strong>where_not</strong>(clause)

        <a class="method-permalink" href="#where_not%28clause%29-instance-method">#</a>
      </div>
      
        <div class="doc"><p>Add <code>NOT</code> <em>clause</em> to <code>WHERE</code>.</p>

<pre><code>where_not(<span class="s">&quot;id = 42&quot;</span>)
<span class="c"># WHERE (...) AND NOT (id = 42)</span></code></pre></div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/atomframework/model/blob/68602d567fc6305034bdf8ce6a34a496c45e624b/src/atom/query/where.cr#L213" target="_blank">View source</a>]
        
      </div>
    </div>
  




</div>

</body>
</html>
